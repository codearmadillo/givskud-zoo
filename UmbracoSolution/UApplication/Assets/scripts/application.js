"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cookies={get:function(e){var t=document.cookie.split(";");return 0<(t=t.filter(function(t){return t.split("=")[0].trim()==e})).length?t[0].split("=")[1]:null},set:function(t,e,i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var s="expires="+o.toUTCString();return document.cookie=t+"="+e+";"+s+";path=/",this.get(t)},remove:function(t){return null==this.set(t,"",-1)}},InteractiveMap=function(){function o(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,o),this.Viewport={Width:t.clientWidth,Height:t.clientHeight,Orientation:null},this.Zoom={Minimum:1,Maximum:4,Increase:.5},this.Zoom.Zoom=i&&i.Zoom&&i.Zoom>=this.Zoom.Minimum&&i.Zoom<=this.Zoom.Maximum?i.Zoom:1,this.Pan={Force:.09,IsEnabled:!0,Horizontal:{isEnabled:!0},Vertical:{isEnabled:!0},Element:{},XStart:null,YStart:null,mouseDrag:!1,touchDrag:!1},this.Position={x:i&&i.Position?i.Position.x:0,y:i&&i.Position?i.Position.y:0},this.Map={Source:e.Map,AspectRatio:null,Orientation:null,RealWorld:e.UsesRealWorld},this.Map.RealWorld&&(this.Map.Longitude=e.Longitude,this.Map.Latitude=e.Latitude,this.Map.Area={Longitude:this.Map.Longitude.End-this.Map.Longitude.Start,Latitude:this.Map.Latitude.Start-this.Map.Latitude.End},this.Map.Distances={hor:this.GetGeographicDistance(this.Map.Longitude.Start,this.Map.Latitude.Start-(this.Map.Latitude.Start-this.Map.Latitude.End)/2,this.Map.Longitude.End,this.Map.Latitude.Start-(this.Map.Latitude.Start-this.Map.Latitude.End)/2),ver:this.GetGeographicDistance(this.Map.Longitude.End-(this.Map.Latitude.End-this.Map.Latitude.Start)/2,this.Map.Latitude.Start,this.Map.Longitude.End-(this.Map.Latitude.End-this.Map.Latitude.Start)/2,this.Map.Latitude.End)},this.Map.Step=1,this.CalculateDistances()),this.Elements={Parent:t},this.SynchQueue=Array(),this.InitiatedCall=!1,this.Animations={},this.Markers={},this.Load()}return _createClass(o,[{key:"Load",value:function(){var e=this;this.Elements.Parent.className=this.Elements.Parent.className+" iamap",this.Elements.Loader=this.Loader(),this.Elements.Parent.appendChild(this.Elements.Loader);var i=new Image;i.addEventListener("load",function(t){1<i.width/i.height?(e.Map.Orientation="horizontal",e.Map.AspectRatio=i.height/i.width):(e.Map.Orientation="vertical",e.Map.AspectRatio=i.width/i.height),e.Render(),window.addEventListener("resize",function(t){e.CalculateDistances(),e.Render()})}),i.src=this.Map.Source}},{key:"Render",value:function(){if(this.Viewport={Width:this.Elements.Parent.clientWidth,Height:this.Elements.Parent.clientHeight,Orientation:this.Elements.Parent.clientWidth>this.Elements.Parent.clientHeight?"horizontal":"vertical"},!this.Elements.Map){var t=document.createElement("div");t.className="iamap-maplayer",t.Styles({position:"relative","background-image":"url('"+this.Map.Source+"')","background-repeat":"no-repeat","background-position":"center center","z-index":50}),this.Elements.Map=t,this.Elements.Parent.appendChild(this.Elements.Map),this.Elements.Loader&&this.Elements.Parent.removeChild(this.Elements.Loader),this.RunSynchQueue(),this.CreateControllers()}var e={left:0,top:0};if("horizontal"==this.Viewport.Orientation)var i=this.Viewport.Height*this.Zoom.Zoom+"px",o=(this.Viewport.Height/this.Map.AspectRatio*this.Zoom.Zoom).toFixed(2)+"px";else o=this.Viewport.Width*this.Zoom.Zoom+"px",i=(this.Viewport.Width*this.Map.AspectRatio*this.Zoom.Zoom).toFixed(2)+"px";var s="horizontal"==this.Map.Orientation?"100% auto":"auto 100%";this.Pan.Horizontal.isEnabled=!0,this.Pan.Vertical.isEnabled=!0,"horizontal"==this.Map.Orientation?parseFloat(o)<=this.Viewport.Width?(e.left=(this.Viewport.Width-parseFloat(o)).toFixed(2)/2,e.top=(this.Viewport.Height-parseFloat(i)).toFixed(2)/2,this.Elements.Map.style.left=e.left+"px",this.Elements.Map.style.top=e.top+"px"):parseFloat(i)<this.Viewport.Height&&(e.top=(this.Viewport.Height-parseFloat(i)).toFixed(2)/2,this.Elements.Map.style.top=e.top+"px"):parseFloat(i)<=this.Viewport.Height?(e.left=(this.Viewport.Width-parseFloat(o)).toFixed(2)/2,e.top=(this.Viewport.Height-parseFloat(i)).toFixed(2)/2,this.Elements.Map.style.left=e.left+"px",this.Elements.Map.style.top=e.top+"px"):parseFloat(o)<this.Viewport.Width&&(e.left=(this.Viewport.Width-parseFloat(o)).toFixed(2)/2,this.Elements.Map.style.top=e.top+"px"),parseFloat(o)<=this.Viewport.Width&&(this.Pan.Horizontal.isEnabled=!1),parseFloat(i)<=this.Viewport.Height&&(this.Pan.Vertical.isEnabled=!1),this.Elements.Map.style.backgroundSize=s,this.Elements.Map.style.width=o,this.Elements.Map.style.height=i;var n=parseFloat(this.Elements.Map.style.width),a=parseFloat(this.Elements.Map.style.height);if(this.Map.StepSize.hor.px||(this.Map.StepSize.hor.px=n/(this.Map.Distances.hor/this.Map.Step)),this.Map.StepSize.ver.px||(this.Map.StepSize.ver.px=a/(this.Map.Distances.ver/this.Map.Step)),this.Markers)for(var r in this.Markers){var l=this.Markers[r].items;for(var h in l){var p=l[h];if(!p.Element){var u=document.createElement("span");u.style.position="absolute",u.className="iamap-marker",u.style.width="7px",u.style.height=u.style.width,u.style.borderRadius="calc("+u.style.width+" / 2)",u.style.backgroundColor="red",this.Markers[r].items[h].Element=u,this.Elements.Markers.appendChild(this.Markers[r].items[h].Element)}this.Markers[r].items[h].Element.style.visibility=p.render?"unset":"hidden";var c=Math.abs(this.Map.Longitude.Start-p.position.x),d=Math.abs(this.Map.Latitude.Start-p.position.y);this.Markers[r].items[h].Element.style.left=Math.abs(c/this.Map.StepSize.hor.coords*this.Map.StepSize.hor.px)*this.Zoom.Zoom+"px",this.Markers[r].items[h].Element.style.top=Math.abs(d/this.Map.StepSize.ver.coords*this.Map.StepSize.ver.px)*this.Zoom.Zoom+"px"}}return this.Pan.Boundaries={top:0,right:-1*(this.Elements.Map.offsetWidth-this.Viewport.Width),bottom:-1*(this.Elements.Map.offsetHeight-this.Viewport.Height),left:0},!0}},{key:"Loader",value:function(){var t=document.createElement("span");return t.className="iamap-loader",t.textContent="Loading resources",t}},{key:"GetGeographicDistance",value:function(t,e,i,o){var s=this.Deg2Rad(o-e),n=this.Deg2Rad(i-t),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.Deg2Rad(e))*Math.cos(this.Deg2Rad(o))*Math.sin(n/2)*Math.sin(n/2);return 6391*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))*1e3}},{key:"Deg2Rad",value:function(t){return t*(Math.PI/180)}},{key:"CalculateDistances",value:function(){this.Map.StepSize={hor:{coords:this.Map.Area.Longitude/(this.Map.Distances.hor/this.Map.Step),px:null},ver:{coords:this.Map.Area.Latitude/(this.Map.Distances.ver/this.Map.Step),px:null}}}},{key:"MapShowCurrentLocation",value:function(){var i=this;return navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var e=t.coords;if(!i.IsLocationInBounds(t.coords))return new Popup(Array({tag:"h2",text:"Location error"},{tag:"p",text:"Seems like you are not in the area of the Zoo"}),!0);i.Markers.location?i.Markers.location.items.location.position={x:e.longitude,y:e.latitude}:i.AddMarkers(Array({Category:{Id:"location",Slug:"location",Label:"Location",Icon:null,controller:!1},Id:"location",Title:"My location",listener:!1,Description:"",Latitude:e.latitude,Longitude:e.longitude}))},this.MapLocationError,{enableHighAccuracy:!0,maximumAge:0}):this.MapLocationError(null)}},{key:"MapLocationError",value:function(t){var e=Array();switch(e.push({tag:"h2",text:"Map error"}),t.code){case t.PERMISSION_DENIED:e.push({tag:"p",text:"User denied the request for Geolocation."});break;case t.POSITION_UNAVAILABLE:e.push({tag:"p",text:"Location information is unavailable."});break;case t.TIMEOUT:e.push({tag:"p",text:"The request to get user location timed out."});break;case t.UNKNOWN_ERROR:default:e.push({tag:"p",text:"An unknown error occurred."})}return new Popup(e,!0)}},{key:"IsLocationInBounds",value:function(t){return t.longitude>this.Map.Longitude.Start&&t.longitude<this.Map.Longitude.End&&(t.latitude>this.Map.Latitude.End&&t.latitude<this.Map.Latitude.Start)}},{key:"MapControlZoom",value:function(t){var e=this.Position.x/this.Zoom.Zoom,i=this.Position.y/this.Zoom.Zoom;return this.Zoom.Zoom=t?this.Zoom.Zoom<this.Zoom.Maximum?this.Zoom.Zoom+this.Zoom.Increase:this.Zoom.Zoom:this.Zoom.Zoom>this.Zoom.Minimum?this.Zoom.Zoom-this.Zoom.Increase:this.Zoom.Zoom,this.Position.x=e*this.Zoom.Zoom,this.Position.y=i*this.Zoom.Zoom,this.Render()}},{key:"ZoomTo",value:function(t){return this.Zoom.Zoom=t,this.Render()}},{key:"MapControlPan",value:function(t,e){if(!this.Pan.Vertical.isEnabled&&!this.Pan.Horizontal.isEnabled)return!1;var i=parseFloat((t-this.Pan.XStart).toFixed(2)),o=parseFloat((e-this.Pan.YStart).toFixed(2));this.Pan.XStart=t,this.Pan.YStart=e;var s=this.Elements.Map.offsetLeft?this.Elements.Map.offsetLeft:0,n=this.Elements.Map.offsetTop?this.Elements.Map.offsetTop:0;this.Pan.Horizontal.isEnabled&&(this.Elements.Map.style.left=parseFloat(s+i)+"px"),this.Pan.Vertical.isEnabled&&(this.Elements.Map.style.top=parseFloat(n+o)+"px")}},{key:"MapControlPanCallback",value:function(){this.Pan.Boundaries={top:0,right:-1*(this.Elements.Map.offsetWidth-this.Viewport.Width),bottom:-1*(this.Elements.Map.offsetHeight-this.Viewport.Height),left:0};var t={iterations:1,duration:250},e=this;if(this.Pan.Horizontal.isEnabled&&(this.Elements.Map.offsetLeft<this.Pan.Boundaries.right||this.Elements.Map.offsetLeft>this.Pan.Boundaries.left)){if(this.Pan.Horizontal.isEnabled=!1,this.Elements.Map.offsetLeft<this.Pan.Boundaries.right)var i=Array({left:this.Elements.Map.offsetLeft+"px"},{left:this.Pan.Boundaries.right+"px"}),o={left:this.Pan.Boundaries.right+"px"};if(this.Elements.Map.offsetLeft>this.Pan.Boundaries.left)i=Array({left:this.Elements.Map.offsetLeft+"px"},{left:this.Pan.Boundaries.left+"px"}),o={left:this.Pan.Boundaries.left+"px"};this.Elements.Map.Animation(i,t,function(){e.Elements.Map.Styles(o)}),this.Pan.Horizontal.isEnabled=!0}if(this.Pan.Vertical.isEnabled&&(this.Elements.Map.offsetTop<this.Pan.Boundaries.bottom||this.Elements.Map.offsetTop>this.Pan.Boundaries.top)){if(this.Pan.Vertical.isEnabled=!1,this.Elements.Map.offsetTop<this.Pan.Boundaries.bottom)i=Array({top:this.Elements.Map.offsetTop+"px"},{top:this.Pan.Boundaries.bottom+"px"}),o={top:this.Pan.Boundaries.bottom+"px"};if(this.Elements.Map.offsetTop>this.Pan.Boundaries.top)i=Array({top:this.Elements.Map.offsetTop+"px"},{top:this.Pan.Boundaries.top+"px"}),o={top:this.Pan.Boundaries.top+"px"};this.Elements.Map.Animation(i,t,function(){e.Elements.Map.Styles(o)}),this.Pan.Vertical.isEnabled=!0}}},{key:"MoveToLocation",value:function(t){if(this.Markers.hasOwnProperty(t.groupId)&&this.Markers[t.groupId].items.hasOwnProperty(t.itemId)){this.ZoomTo(3);var e=this.Markers[t.groupId].items[t.itemId],i=Math.abs(e.position.x-this.Map.Longitude.Start)/Map.Map.StepSize.hor.coords*Map.Map.StepSize.hor.px*this.Zoom.Zoom*-1,o=Math.abs(e.position.y-this.Map.Latitude.Start)/Map.Map.StepSize.ver.coords*Map.Map.StepSize.ver.px*this.Zoom.Zoom*-1,s={h:i+(this.Viewport.Width/2-e.Element.offsetWidth/2),v:o+(this.Viewport.Height/2-e.Element.offsetHeight/2)};return s.h>this.Pan.Boundaries.left?s.h=this.Pan.Boundaries.left:s.h<this.Pan.Boundaries.right&&(s.h=this.Pan.Boundaries.right),s.v>this.Pan.Boundaries.top?s.v=this.Pan.Boundaries.top:s.v<this.Pan.Boundaries.bottom&&(s.v=this.Pan.Boundaries.bottom),this.Elements.Map.Styles({left:s.h+"px",top:s.v+"px"}),this.HighlightMarker(e.id,e.group.id),this.Render()}return!1}},{key:"MapCoverArea",value:function(t,e,i,o){}},{key:"AddMarkers",value:function(t,e){if(!this.Elements.Map)return this.AddToSynchQueue("AddMarkers",this,Array(t));var i=e=e||this;if(t.forEach(function(t){i.Markers[t.Category.Id]||(i.Markers[t.Category.Id]={id:t.Category.Id,label:t.Category.Label,slug:t.Category.Slug,icon:t.Category.Icon,items:{}}),i.Markers[t.Category.Id].items[t.Id]?console.log("Warning: Duplicate marker ID"):i.Markers[t.Category.Id].items[t.Id]=new InteractiveMapMarker({id:t.Id,group:{id:t.Category.Id,label:t.Category.Label,slug:t.Category.Slug,icon:t.Category.Icon},label:t.Title,position:{x:t.Longitude,y:t.Latitude},desc:t.Description})}),!e.Elements.Markers){var o=document.createElement("div");o.className="iamap-markerslayer",o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.right=0,o.style.bottom=0,e.Elements.Markers=o,e.Elements.Map.appendChild(e.Elements.Markers)}e.Render()}},{key:"HideMarkers",value:function(t){var e=this.FilterMarkers(t).items;if(!e)return!1;for(var i in e){var o=e[i].id,s=e[i].group.id;this.Markers[s]&&this.Markers[s].items[o]&&(this.Markers[s].items[o].render=!1)}this.Render()}},{key:"ShowMarkers",value:function(t){var e=this.FilterMarkers(t).items;if(!e)return!1;for(var i in e){var o=e[i].id,s=e[i].group.id;this.Markers[s]&&this.Markers[s].items[o]&&(this.Markers[s].items[o].render=!0)}this.Render()}},{key:"FilterMarkers",value:function(t){if(!t);var e=void 0;switch(t.type){case"group":e=t.group?this.Markers[t.group]:null;break;case"marker":e=t.group&&t.id?this.Markers[t.group].items[t.id]:null;break;case"all":default:e=this.Markers}return null!=e&&e}},{key:"HighlightMarker",value:function(t,e){return console.log("Highlighting marker ",t," from group ",e)}},{key:"ToggleMarkersControlls",value:function(){switch("none"==MapObject.Elements.Controllers.Markers.Controls.style.display){case!0:MapObject.Elements.Controllers.Markers.Controls.style.display="block";break;case!1:MapObject.Elements.Controllers.Markers.Controls.style.display="none"}return!0}},{key:"CreateControllers",value:function(){var a=this,r=this;this.Elements.Controllers={};var t=document.createElement("div");t.Properties({className:"iamap-controllerslayer"}),t.Styles({position:"absolute",bottom:"15px",right:"15px","z-index":100,"text-align":"right"}),this.Elements.Controllers.Parent=t,this.Elements.Parent.appendChild(this.Elements.Controllers.Parent);var e=document.createElement("span");e.Styles({position:"relative",display:"inline-block",width:"32px",height:"32px","background-size":"32px 32px","background-image":'url("/Assets/images/map.icon.location.svg")',"margin-right":"32px"}),e.addEventListener("click",function(t){t.preventDefault(),r.MapShowCurrentLocation()}),this.Elements.Controllers.Location=e,this.Elements.Controllers.Parent.appendChild(this.Elements.Controllers.Location);var i=document.createElement("span");i.className="iamap-toggle-sidebar",i.addEventListener("click",function(t){r.ToggleMarkersControlls()}),this.Elements.Controllers.OpenSidebar=i,this.Elements.Parent.appendChild(this.Elements.Controllers.OpenSidebar);var o=document.createElement("span");o.Styles({position:"relative",display:"inline-block",width:"32px",height:"32px","background-size":"32px 32px","background-image":'url("/Assets/images/map.icon.zoom-in.svg")'}),o.addEventListener("click",function(t){t.preventDefault(),r.MapControlZoom(!0)}),this.Elements.Controllers.ZoomIn=o,this.Elements.Controllers.Parent.appendChild(this.Elements.Controllers.ZoomIn);var s=document.createElement("span");s.Styles({position:"relative",display:"inline-block",width:"32px",height:"32px","background-size":"32px 32px","background-image":'url("/Assets/images/map.icon.zoom-out.svg")',"margin-left":"6px"}),s.addEventListener("click",function(t){t.preventDefault(),r.MapControlZoom(!1)}),this.Elements.Controllers.ZoomOut=s,this.Elements.Controllers.Parent.appendChild(this.Elements.Controllers.ZoomOut),this.Elements.Map.addMultipleListeners("mousedown","touchstart",function(t){switch(t.preventDefault(),t.type){case"mousedown":r.Pan.mouseDrag=!0,r.Pan.XStart=parseFloat((t.clientX-r.Elements.Parent.offsetLeft).toFixed(2)),r.Pan.YStart=parseFloat((t.clientY-r.Elements.Parent.offsetTop).toFixed(2));break;case"touchstart":r.Pan.touchDrag=!0,r.Pan.XStart=parseFloat((t.changedTouches[0].clientX-r.Elements.Parent.offsetLeft).toFixed(2)),r.Pan.YStart=parseFloat((t.changedTouches[0].clientY-r.Elements.Parent.offsetTop).toFixed(2))}}),this.Elements.Map.addMultipleListeners("mousemove","touchmove",function(t){switch(t.preventDefault(),t.type){case"mousemove":if(!r.Pan.mouseDrag||!r.Pan.IsEnabled)return!1;var e=window.event.clientX,i=window.event.clientY;break;case"touchmove":if(!r.Pan.touchDrag||!r.Pan.IsEnabled)return!1;e=parseFloat(window.event.changedTouches[0].clientX.toFixed(2)),i=parseFloat(window.event.changedTouches[0].clientY.toFixed(2))}r.MapControlPan(e,i)}),this.Elements.Map.addMultipleListeners("mouseup","mouseleave","touchend",function(t){t.preventDefault(),r.Pan.touchDrag=!1,r.Pan.mouseDrag=!1,r.MapControlPanCallback(),r.Pan.XStart=null,r.Pan.YStart=null});var n=document.createElement("div");n.className="iamap-filters__controls";var l=document.createElement("div");l.className="iamap-filters__wrapper";var h=document.createElement("h2"),p=document.createTextNode("Overview of the Park");h.appendChild(p);var u=document.createElement("span"),c=document.createTextNode("Here on this map you can get an overview of all the different enclosures, activities, facilities and more.");u.appendChild(c);var d=document.createElement("div");d.className="iamap-filters__close",d.addEventListener("click",function(){r.ToggleMarkersControlls()}),this.Elements.Controllers.Markers||(this.Elements.Controllers.Markers={});var m=document.createElement("span");m.className="close",m.addEventListener("click",function(t){r.ToggleMarkersControlls()}),l.append(m,h,u),this.Elements.Controllers.Markers.ControlsWrapper=l,this.Elements.Controllers.Markers.ControlsClose=d,this.Elements.Controllers.Markers.Controls=n,this.Elements.Controllers.Markers.Controls.append(this.Elements.Controllers.Markers.ControlsWrapper,this.Elements.Controllers.Markers.ControlsClose),this.Elements.Parent.appendChild(this.Elements.Controllers.Markers.Controls);var f=function(t){var e=r.Markers[t];if(!1===e.controller)return{v:void 0};var i=document.createElement("label");i.htmlFor=e.slug;var o=document.createTextNode(e.label),s=document.createElement("span");s.appendChild(o);var n=document.createElement("input");n.type="checkbox",n.checked="checked",n.id=e.slug,n.name=e.slug,n.addEventListener("change",function(t){this.checked?(i.classList.add("active"),r.ShowMarkers({type:"group",group:e.id.toString()})):(i.classList.remove("active"),r.HideMarkers({type:"group",group:e.id.toString()}))}),i.append(n,s),a.Elements.Controllers["Group"+e.id]=i,a.Elements.Controllers.Markers.ControlsWrapper.appendChild(a.Elements.Controllers["Group"+e.id])};for(var g in r.Markers){var M=f(g);if("object"===(void 0===M?"undefined":_typeof(M)))return M.v}return!0}},{key:"AddToSynchQueue",value:function(t,e,i){this.SynchQueue.push({f:t,c:e?this:null,data:Array.isArray(i)?i:Array(i)})}},{key:"RunSynchQueue",value:function(){var i=this;this.SynchQueue.forEach(function(t,e){t.c&&t.data.push(i),i[t.f].apply(i,t.data),i.SynchQueue.splice(e,1)})}}]),o}(),InteractiveMapMarker=function(){function e(t){_classCallCheck(this,e),t&&t.group&&t.id&&t.position&&t.label?(this.id=t.id,this.group=t.group,this.position=t.position,this.label=t.label,this.desc=t.desc?t.desc:"",this.render=!0):console.log("Marker error: The definition of config incorrect")}return _createClass(e,[{key:"cfgError",value:function(t){return alert("The field "+t+" is missing from configuration")}},{key:"getPosition",value:function(){return this.position}}]),e}(),Popup=function(){function i(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return _classCallCheck(this,i),this.dom=this.todom(t),this.cls=e,this.render()}return _createClass(i,[{key:"todom",value:function(t){var n=Array();return t.forEach(function(t){var s,e,i=t.tag.split("@"),o=1==i.length?document.createElement(i):(s=document.createElement(i[0]),(e=i).shift(),e.forEach(function(t){var e=t.split("="),i=e[0],o=e[1].replace(";"," ");return s.setAttribute(i,o)}),s);t=document.createTextNode(t.text);return o.appendChild(t),n.push(o)}),n}},{key:"render",value:function(){var e=document.createElement("div");e.className="overlay__window";var i=document.createElement("div");i.className="popup__content";var t=document.createElement("div");return t.className="popup__outer",this.cls&&t.addEventListener("click",function(t){e.remove()}),this.dom.forEach(function(t){i.appendChild(t)}),e.append(i,t),document.body.appendChild(e)}}]),i}(),Game=function(){function i(t,e){_classCallCheck(this,i),this.cookies={session:"gamesession-"+t,score:"gamesession-"+t+"-score",question:"gamesession-"+t+"-question",endgame:"gamesession-"+t+"-endgame"},this.settings={score:0,currentquestion:0,isidle:!1,questions:quizjson},this.settings.count=e,this.startgame()}return _createClass(i,[{key:"restartsessions",value:function(){for(var t in this.cookies)Cookies.remove(this.cookies[t])}},{key:"restartcontrols",value:function(){var i=this;this.settings.isidle=!1;var o=this.settings.questions[this.settings.currentquestion],t=document.querySelectorAll(".question__item"),e=document.querySelectorAll(".hint__content"),s=document.querySelectorAll("#hint-controls");Array.from(s).forEach(function(t){t.style.display="inline-block"}),Array.from(e).forEach(function(t){t.style.display="none"}),Array.from(t).forEach(function(e){e.classList.remove("correct"),e.classList.remove("incorrect"),e.addEventListener("click",function(t){t.preventDefault(),!1===i.settings.isidle&&(i.settings.isidle=!0,e.getAttribute("game-key")==o.CorrectAnswer?(e.className+=" correct",i.addscore()):e.className+=" incorrect",i.nextquestion())})})}},{key:"startgame",value:function(){Cookies.get(this.cookies.endgame)?Cookies.remove(this.cookies.endgame):this.restartsessions(),this.restartcontrols()}},{key:"closegame",value:function(){Cookies.set(this.cookies.endgame,!0,7),location.reload()}},{key:"nextquestion",value:function(){var e=this;this.settings.currentquestion+=1;setTimeout(function(){if(e.settings.currentquestion>=e.settings.count)e.closegame();else{e.restartcontrols();var i=e.settings.questions[e.settings.currentquestion];document.getElementsByClassName("question__text")[0].textContent=i.Text,document.getElementsByClassName("hint__content")[0].textContent=i.Hint,document.getElementsByClassName("question__image")[0].setAttribute("src",i.ImageUrl);var t=document.getElementsByClassName("question__item");Array.from(t).forEach(function(t,e){t.getElementsByTagName("span")[1].textContent=i.Answers[e]}),document.getElementsByClassName("game__counter")[0].textContent=e.settings.currentquestion+1+" of "+e.settings.count}},600)}},{key:"addscore",value:function(){this.settings.score+=1,Cookies.set(this.cookies.score,this.settings.score,7)}},{key:"showhint",value:function(){var t=document.querySelectorAll(".hint__content"),e=document.querySelectorAll("#hint-controls");Array.from(e).forEach(function(t){t.style.display="none"}),Array.from(t).forEach(function(t){t.style.display="block"})}}]),i}(),Configuration={IsLocationServiceEnabled:!0,LocationDummyOverride:!0};Element.prototype.Animation=function(t,e,i){var o=void 0;if(i)if(e&&e.iterations&&1==e.iterations)o=setTimeout(function(){i()},e.duration?e.duration:0);else if(1<e.iterations&&"Infinity"!==e.iterations){var s=0;o=setInterval(function(){s++,i(),s==e.iterations&&clearInterval(o)},e.duration?e.duration:0)}else o=setInterval(function(){i()},e.duration?e.duration:0);return this.animate(t,e)},Element.prototype.append=function(){for(var t=0;t<arguments.length;t++)this.appendChild(arguments[t])},Element.prototype.prepend=function(){for(var t=0;t<arguments.length;t++)console.log(arguments[t]),this.innerHTML=arguments[t].outerHTML+this.innerHTML},HTMLElement.prototype.Styles=function(t){for(var e in t)this.style[e]=t[e];return this},Element.prototype.addMultipleListeners=function(t){if(arguments.length<=1)return!1;for(var e=0;e<arguments.length-1;e++)this.addEventListener(arguments[e],arguments[arguments.length-1])},Element.prototype.Properties=function(t){for(var e in t)this[e]=t[e];return!0},HTMLDocument.prototype.createTextElement=function(t,e){var i=document.createElement(t),o=document.createTextNode(e);return i.appendChild(o),i};